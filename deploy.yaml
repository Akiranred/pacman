---
- name: 'Deploying App on Vsphere with Tanzu'
  hosts: all
  user: root
  ignore_errors: yes
  
  tasks:
  - name: 'Creating namespace demo-ns'
    shell: 'kubectl create ns -n demo-ns'
      
  - name: 'Creating pod'
    shell: 'kubectl run pacman --image=harbor.lab39.sunfire.lab/test/test-s:${BUILD_NUMBER} -n demo-ns'
    
  - name: 'Creating service'
    shell: 'kubectl expose pod pacman --type=LoadBalancer --port=80 --target-port=80 -n demo-ns'
